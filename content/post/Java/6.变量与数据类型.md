---
author: 'Wei'
title: '6.变量与数据类型'
date: '2022-05-14'
categories:
  - Java
---

> 变量是程序的基本组成单位

## Java 的变量规范

- 所有变量必须先声明后使用
- 相同类型的变量之间允许赋值

### 声明方式

```
type varName = 初始值


int x = 100;
```

### 类型

基本数据和引用数据

![](https://s2.loli.net/2022/05/15/JMu9viAE2zwdgrB.png)

**_引用数据类型_**

对一个对象的引用（指针）

### 基本数据类型

- 整数类型：byte，short，int，long(存放整数值)
- 浮点数类型：float，double（存放小数）
- 字符类型：char（表示单个字符）
- 布尔类型：boolean

#### 字节数

```ascii
      ┌───┐
  byte │   │
       └───┘
       ┌───┬───┐
 short │   │   │
       └───┴───┘
       ┌───┬───┬───┬───┐
   int │   │   │   │   │
       └───┴───┴───┴───┘
       ┌───┬───┬───┬───┬───┬───┬───┬───┐
  long │   │   │   │   │   │   │   │   │
       └───┴───┴───┴───┴───┴───┴───┴───┘
       ┌───┬───┬───┬───┐
 float │   │   │   │   │
       └───┴───┴───┴───┘
       ┌───┬───┬───┬───┬───┬───┬───┬───┐
double │   │   │   │   │   │   │   │   │
       └───┴───┴───┴───┴───┴───┴───┴───┘
       ┌───┬───┐
  char │   │   │
       └───┴───┘
```

#### 表示范围

整型（最高位的 bit 表示符号位（0 表示正数，1 表示负数）

![](https://s2.loli.net/2022/05/15/fOueQWLoyKlBFwP.png)

浮点型（最高位符号位，接下来 8/11 位表示指数，接下来 23/52 位表示尾数）

![](https://s2.loli.net/2022/05/15/ceCFgIsZmoqUPkW.png)

#### 使用细节

- 数据类型所占字节数不受操作系统发生改变
- 整型常量默认为 int，不足在后加 L
- 1 字节 8 位
- **_浮点数=符号位+指数位+尾数位_**，尾数部分可能丢失，造成精度损失(小数都是近似值）[详情](https://akaedu.github.io/book/ch14s04.html)
- 转义字符 [详情](https://www.cnblogs.com/xuwc/p/13308822.html),char 输出转义字符会表示转义
- **_<u>char 的本质是整数，对应 Unicode 码字符</u>_**
- 字符型表现形式：单个字符+转义字符+Unicode 值
- char 存储：a=>97=>二进制=>存储
- char 输出：二进制=>97=>a=>显示
- 规定浮点数二进制表示= 1.XXX x 2<sup>N</sup>，有效数字 2<sup>23</sup>=8388608（7 位数）
- 小数默认以 double 存放，若想让编译器理解成 float 在之后 f
- 单精度够用就不要用双精度，浪费空间

```java

//字符型
public class Basic {
    public static void main(String[] args) {
        char word = 97;
        System.out.println(word);
        /*
        输出为a,本质为整数，在内存中存储为整数
        输出所给整数对应的Unicode编码字符
         */
        int word3 = 'a';
        System.out.println(word3);//输出为97
        char word1 = '\r';
        System.out.println(word1);//输出为回车
        char word2 = 'a';
        System.out.println(word2);//输出为a
    }
}
```

##### 浮点数细节

###### 进制转换

![](https://s2.loli.net/2022/05/16/cRxe92HmBjJudEz.png)

###### 对照表格

![](https://s2.loli.net/2022/05/16/ZRjhyqs32ULIuiN.png)

###### 原理

![](https://s2.loli.net/2022/05/16/59f2tFyuprvOlIM.png)

###### 简单方法

![](https://s2.loli.net/2022/05/16/3UNDAa4lP6bjepS.png)

###### 精度损失

![](https://s2.loli.net/2022/05/16/y37qFtEaeRV1W9n.png)

###### 科学计数法

![](https://s2.loli.net/2022/05/16/bG5QhmvtDfn1FMY.png)

###### IEEE754

![](https://s2.loli.net/2022/05/16/b8RCepIlKt2dzP7.png)

###### 浮点数的限制

![](https://s2.loli.net/2022/05/16/OIX9gvY6kG2nANu.png)

最高位为符号位（+，-）

小数位存放省去整数位的 1 的有效二进制位

指数位偏移 127（+127/1023）来表示

![](https://s2.loli.net/2022/05/16/2OLKuaMBHWfXh1D.png)

![](https://s2.loli.net/2022/05/16/oUrVzeZajAixmJn.png)

### 基本数据类型赋值机制

```java
public class Main {
    public static void main(String[] args) {
        int n = 100; // 定义变量n，同时赋值为100
        System.out.println("n = " + n); // 打印n的值

        n = 200; // 变量n赋值为200
        System.out.println("n = " + n); // 打印n的值

        int x = n; // 变量x赋值为n（n的值为200，因此赋值后x的值也是200）
        System.out.println("x = " + x); // 打印x的值

        x = x + 100; // 变量x赋值为x+100（x的值为200，因此赋值后x的值是200+100=300）
        System.out.println("x = " + x); // 打印x的值
        System.out.println("n = " + n); // 再次打印n的值，n应该是200还是300？
   }
}
```

代码执行流程：

`int n = 100;`:定义了变量`n`赋值为`100`，JVM 在内存中为变量`n`分配一个“存储单元”，填入值`100`：

```ascii
      n
      │
      ▼
┌───┬───┬───┬───┬───┬───┬───┐
│   │100│   │   │   │   │   │
└───┴───┴───┴───┴───┴───┴───┘
```

`n = 200;`：JVM 把`200`写入变量`n`的存储单元，原有的值被覆盖，n`的值为`200`：

```ascii
      n
      │
      ▼
┌───┬───┬───┬───┬───┬───┬───┐
│   │200│   │   │   │   │   │
└───┴───┴───┴───┴───┴───┴───┘
```

`int x = n;`：定义新变量`x`，同时对`x`赋值，JVM 需要*新分配*一个存储单元给变量`x`，并写入和变量`n`一样的值，变量`x`的值为`200`：

```ascii
      n           x
      │           │
      ▼           ▼
┌───┬───┬───┬───┬───┬───┬───┐
│   │200│   │   │200│   │   │
└───┴───┴───┴───┴───┴───┴───┘
```

`x = x + 100;`：JVM 首先计算等式右边的值`x + 100`，结果为`300`（`x`为`200`），将结果`300`写入`x`的存储单元，因此，变量`x`最终的值变为`300`：

```ascii
      n           x
      │           │
      ▼           ▼
┌───┬───┬───┬───┬───┬───┬───┐
│   │200│   │   │300│   │   │
└───┴───┴───┴───┴───┴───┴───┘
```

变量可以反复赋值，等号`=`是赋值语句

### 基本数据类型的转换

#### 自动类型转换

![](https://s2.loli.net/2022/05/15/yBNf7nucX2h9F1j.png)

箭头左边的数值类型可以自动类型转换为箭头右边的数值类型

#### 强制类型转换

```
(targettype)value
```

#### 使用细节

![](https://s2.loli.net/2022/05/15/WvadQolcIHxYOVE.png)
