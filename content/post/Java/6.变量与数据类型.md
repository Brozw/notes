---
author: 'Wei'
title: '6.变量与数据类型'
date: '2022-05-14'
categories:
  - Java
---

> 变量是程序的基本组成单位

## Java 的变量规范

- 所有变量必须先声明后使用
- 相同类型的变量之间允许赋值

### 声明方式

```
type varName = 初始值


int x = 100;
```

### 类型

基本数据和引用数据

![](https://s2.loli.net/2022/05/15/JMu9viAE2zwdgrB.png)

### 基本数据类型

- 整数类型：byte，short，int，long(存放整数值)
- 浮点数类型：float，double（存放小数）
- 字符类型：char（表示单个字符）
- 布尔类型：boolean

#### 字节数

```ascii
      ┌───┐
  byte │   │
       └───┘
       ┌───┬───┐
 short │   │   │
       └───┴───┘
       ┌───┬───┬───┬───┐
   int │   │   │   │   │
       └───┴───┴───┴───┘
       ┌───┬───┬───┬───┬───┬───┬───┬───┐
  long │   │   │   │   │   │   │   │   │
       └───┴───┴───┴───┴───┴───┴───┴───┘
       ┌───┬───┬───┬───┐
 float │   │   │   │   │
       └───┴───┴───┴───┘
       ┌───┬───┬───┬───┬───┬───┬───┬───┐
double │   │   │   │   │   │   │   │   │
       └───┴───┴───┴───┴───┴───┴───┴───┘
       ┌───┬───┐
  char │   │   │
       └───┴───┘
```

#### 范围

整型（最高位的 bit 表示符号位（0 表示正数，1 表示负数）

![](https://s2.loli.net/2022/05/15/fOueQWLoyKlBFwP.png)

浮点型（最高位符号位，接下来 8/11 位表示指数，接下来 23/52 位表示尾数）

![](https://s2.loli.net/2022/05/15/ceCFgIsZmoqUPkW.png)

#### 使用细节

- 数据类型所占字节数不受操作系统发生改变
- 整型常量默认为 int，不足在后加 L
- 1 字节 8 位
- 浮点数=符号位+指数位+尾数位，尾数部分可能丢失，造成精度损失(小数都是近似值）[详情](https://akaedu.github.io/book/ch14s04.html)
- 转义字符 [详情](https://www.cnblogs.com/xuwc/p/13308822.html)
- char 的本质是整数，对应 Unicode 码字符
- 字符型表现形式：单个字符+转义字符+Unicode 值
- char 存储：a=>97=>二进制=>存储
- char 输出：二进制=>97=>a=>显示

### 基本数据类型赋值机制

```java
public class Main {
    public static void main(String[] args) {
        int n = 100; // 定义变量n，同时赋值为100
        System.out.println("n = " + n); // 打印n的值

        n = 200; // 变量n赋值为200
        System.out.println("n = " + n); // 打印n的值

        int x = n; // 变量x赋值为n（n的值为200，因此赋值后x的值也是200）
        System.out.println("x = " + x); // 打印x的值

        x = x + 100; // 变量x赋值为x+100（x的值为200，因此赋值后x的值是200+100=300）
        System.out.println("x = " + x); // 打印x的值
        System.out.println("n = " + n); // 再次打印n的值，n应该是200还是300？
   }
}
```

代码执行流程：

`int n = 100;`:定义了变量`n`赋值为`100`，JVM 在内存中为变量`n`分配一个“存储单元”，填入值`100`：

```ascii
      n
      │
      ▼
┌───┬───┬───┬───┬───┬───┬───┐
│   │100│   │   │   │   │   │
└───┴───┴───┴───┴───┴───┴───┘
```

`n = 200;`：JVM 把`200`写入变量`n`的存储单元，原有的值被覆盖，n`的值为`200`：

```ascii
      n
      │
      ▼
┌───┬───┬───┬───┬───┬───┬───┐
│   │200│   │   │   │   │   │
└───┴───┴───┴───┴───┴───┴───┘
```

`int x = n;`：定义新变量`x`，同时对`x`赋值，JVM 需要*新分配*一个存储单元给变量`x`，并写入和变量`n`一样的值，变量`x`的值为`200`：

```ascii
      n           x
      │           │
      ▼           ▼
┌───┬───┬───┬───┬───┬───┬───┐
│   │200│   │   │200│   │   │
└───┴───┴───┴───┴───┴───┴───┘
```

`x = x + 100;`：JVM 首先计算等式右边的值`x + 100`，结果为`300`（`x`为`200`），将结果`300`写入`x`的存储单元，因此，变量`x`最终的值变为`300`：

```ascii
      n           x
      │           │
      ▼           ▼
┌───┬───┬───┬───┬───┬───┬───┐
│   │200│   │   │300│   │   │
└───┴───┴───┴───┴───┴───┴───┘
```

变量可以反复赋值，等号`=`是赋值语句

### 基本数据类型的转换

#### 自动类型转换

![](https://s2.loli.net/2022/05/15/yBNf7nucX2h9F1j.png)

箭头左边的数值类型可以自动类型转换为箭头右边的数值类型

#### 强制类型转换

```
(targettype)value
```

#### 使用细节

![](https://s2.loli.net/2022/05/15/WvadQolcIHxYOVE.png)
